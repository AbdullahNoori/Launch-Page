(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{1179:function(t,e,n){var i=n(262),o=/[\\^$.*+?()[\]{}|]/g,s=RegExp(o.source);t.exports=function(t){return(t=i(t))&&s.test(t)?t.replace(o,"\\$&"):t}},1460:function(t,e,n){t.exports=n.p+"e3f347e4b2e77cd66177480cfa3267ad.svg"},1467:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=60},1468:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(208),o=n.n(i),s=rtb.config.dictionaries.companySizeList.map(function(t){return{label:t.name,value:t.name}});function a(){return o()(s)}},1469:function(t,e,n){"use strict";(function(t){var i=n(35),o=n(32),s=n(419),a=n(634),r=n(420),l=n(1470),c=n(33),d=n(491),u=n(34),m=n(26),h=n(635),p=n(534),g=n(261),f=n(124),b=new s.a,v=new a.a;b.configure([new d.a,v],r.e,r.d);var _=[],y=function(){function e(t,e,n,i,o){this.scope=t,this.$timeout=e,this.$element=n,this.$translate=i,this.AuthorizationService=o,this.showInviteToBoardToo=!1,this.inviteToBoardToo=!1,this.emailsReadyForSend=!1,this.sendButtonEnabled=!0,this.inviteLinkUrl="",this.inviteLinkEnabled=!1,this.canShareInviteLink=!0,this.membersEditorFocused=!1,this.sendingInvites=!1}return e.prototype.init=function(t,e,n,i,o,s,a,r,l,d){var m=this;this.team=t,this.emptyInviteErrorMessage=e,this.emailFormatErrorMessage=n,this.submit=i,this.cancel=o,this.onInvitationError=s,a&&(this.showValidationError=a),r&&(this.statHandler=r),this.isBulkEditor=l;var h=Object(u.a)().socialAccounts;this.googleContactsAuthorized=h.google.authorizedInGoogleContacts,this.slackContactsAuthorized=h.slack.authorizedInSlackContacts,this.createSuggestionsProvider(),this.canChangeInvitePolicy=c.W(this.team),this.team.invitationLink&&(this.inviteLinkEnabled=this.team.invitationLink.active,this.inviteLinkUrl=this.team.invitationLink.link),this.canShareInviteLink=this.canChangeInvitePolicy||this.inviteLinkEnabled,this.usersPerAccount=t.limits.usersPerAccount,this.trySendStat("onInit",this.googleContactsAuthorized),setTimeout(function(){var t=d||_;t.length>0&&m.getEditor().addEmails(t),m.toggleEditor(!1),m.scope.safeApply()})},e.prototype.invite=function(){var t=this,e=this.getEditor();if(e.validate()){var n=e.getEmails();if(0===n.length)return this.showValidationError(this.emptyInviteErrorMessage),void e.setFocus();this.emailsReadyForSend&&(this.sendingInvites=!0,Object(f.b)().then(function(e){return e.inviteToTeam(t.team,{emails:n,boardId:t.inviteToBoardToo?Object(g.e)().id:void 0,initiator:p.a.DASHBOARD},t.AuthorizationService)}).then(function(){t.sendingInvites=!1,_=[],t.trySendStat("onSent",n.length,t.inviteToBoardToo,t.getEditor().getType(),t.team.id,t.team.participantPostInvitationPaymentTest),t.submit(n.length)}).catch(function(e){t.sendingInvites=!1,t.scope.$apply(),t.onInvitationError(e)}))}else this.showValidationError(this.emailFormatErrorMessage)},e.prototype.inviteWithSlack=function(t){var e=this;return new Promise(function(n,o){Object(f.b)().then(function(n){return n.inviteToTeam(e.team,{emails:t,channel:h.a.SLACK,boardId:e.inviteToBoardToo?Object(g.e)().id:void 0,initiator:p.a.DASHBOARD},e.AuthorizationService)}).then(function(){_=[],Object(i.a)().show("Invitation"+(t.length>1?"s":"")+" sent"),e.trySendStat("onSent",t.length,e.inviteToBoardToo,e.getEditor().getType(),e.team.id,e.team.participantPostInvitationPaymentTest),n()}).catch(function(){return o()})})},e.prototype.addTeamMembersLater=function(){this.trySendStat("onSkip"),this.cancel()},e.prototype.updateEmailsCounter=function(t){this.emailsReadyForSend=t,_=this.getEditor().getEmails()},e.prototype.getEditor=function(){return this.isBulkEditor?this.bulkEmailsController:this.individualEmailsController},e.prototype.toggleEditor=function(e){var n=this;void 0===e&&(e=!0);var i=this.getEditor().getEmails();e&&(this.isBulkEditor=!this.isBulkEditor),this.getEditor().getType()==l.a.INDIVIDUAL&&i.length<2&&(i=this.addEmptyEmails(i,2-i.length)),this.getEditor().replaceEmails(i,e),this.$timeout(function(){t.tablet?n.$element.find(".md-content__submit-button").eq(0).focus():n.getEditor().setFocus()})},e.prototype.addEmptyEmails=function(t,e){var n=new Array(e).fill("");return t.concat(n)},e.prototype.toggleInviteLink=function(){var t=this;this.inviteLinkEnabled=!this.inviteLinkEnabled,this.inviteLinkEnabled?this.trySendStat("onEnableInviteToTeamLink"):this.trySendStat("onDisableInviteToTeamLink"),o.a.accounts.selectById(this.team.id).setInvitationLinkStatus(this.inviteLinkEnabled).catch(function(e){Object(i.a)().showErrorByData(e),t.inviteLinkEnabled=!t.inviteLinkEnabled,t.scope.$digest()})},e.prototype.copyInviteLink=function(){this.trySendStat("onCopyInviteLink")},e.prototype.copyInviteLinkFromInput=function(){this.trySendStat("onCopyInviteLinkFromInput")},e.prototype.createSuggestionsProvider=function(){var t=this;this.suggestionsProvider=b,v.setAuthChecker(function(){return t.googleContactsAuthorized||t.slackContactsAuthorized})},e.prototype.onGoogleContactsClicked=function(){this.trySendStat("onGoogleContactsClicked")},e.prototype.onGoogleContactsAuthorized=function(){m.ke(),this.googleContactsAuthorized=!0,this.updateSuggestionProvider(),this.scope.$digest()},e.prototype.onSlackContactsClicked=function(){this.trySendStat("onSlackContactsClicked")},e.prototype.onSlackContactsAuthorised=function(){this.slackContactsAuthorized=!0,this.updateSuggestionProvider()},e.prototype.updateSuggestionProvider=function(){this.suggestionsProvider.clearCachedResults()},e.prototype.onMembersEditorFocus=function(){t.tablet&&t.ios&&(this.membersEditorFocused=!0)},e.prototype.onMembersEditorBlur=function(){var e=this;t.tablet&&t.ios&&(this.membersEditorFocused=!1,this.$timeout(function(){var t=e.$element.find(".md-content__submit-button");t&&t.length&&t.length>0&&t.eq(0).scrollIntoView()}))},e.prototype.submit=function(t){throw new Error("Method 'submit' of 'BaseTeamInviteController' class should be overridden")},e.prototype.cancel=function(){throw new Error("Method 'cancel' of 'BaseTeamInviteController' class should be overridden")},e.prototype.onInvitationError=function(t){throw new Error("Method 'onInvitationError' of 'BaseTeamInviteController' class should be overridden")},e.prototype.showValidationError=function(t){setTimeout(function(){return Object(i.a)().showError(t)})},e.prototype.trySendStat=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.statHandler&&this.statHandler[t]&&this.statHandler[t].apply(null,e)},e.prototype.addEmails=function(t){this.getEditor().addEmails(t),this.scope.safeApply()},e.$inject=["$scope","$timeout","$element","$translate","AuthorizationService"],e}();e.a=y}).call(this,n(0))},1470:function(t,e,n){"use strict";var i;!function(t){t.BULK="bulk",t.INDIVIDUAL="individually"}(i||(i={})),e.a=i},2138:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return u});var i=n(30),o=n(149),s=n.n(o),a=n(1179),r=n.n(a),l=n(58),c=n(25),d=n(4318);function u(){return n(4319),Object(c.b)().directive("emailSuggestionsList",m),d}function m(){return Object(i.a)({restrict:"E",template:d,scope:{onCreate:"&",onClickItem:"&",controller:"="},link:h})}function h(e,n){function i(){e.visible=!1,document.removeEventListener("keydown",a,!0)}function o(t){void 0===t&&(t=-1),e&&e.suggestions.forEach(function(e,n){e.selected=n===t})}function a(t){if(t.keyCode==l.a.UP_ARROW||t.keyCode==l.a.DOWN_ARROW){var n=e.suggestions.findIndex(function(t){return t.selected});!function(t,n){var i;-1!=n&&(i=t?n+1<e.suggestions.length?n+1:0:n-1>=0?n-1:e.suggestions.length-1),o(i)}(t.keyCode==l.a.DOWN_ARROW,n)}if(t.keyCode==l.a.ENTER){var s=e.suggestions.find(function(t){return t.selected});s&&e.clickItem(s.email)}t.keyCode==l.a.ESCAPE&&(i(),e.$apply()),t.keyCode!=l.a.UP_ARROW&&t.keyCode!=l.a.DOWN_ARROW&&t.keyCode!=l.a.ENTER&&t.keyCode!=l.a.ESCAPE||(t.stopPropagation(),t.preventDefault())}e.visible=!1,e.position={x:0,y:0},e.sgOver=function(t){e.suggestions.forEach(function(e){e.selected=e==t})},e.controller={show:function(){!function(){e.visible=!0,document.addEventListener("keydown",a,!0),""!=e.query&&t(e.input).parent().get(0)!=n.parent().get(0)&&t(e.input).parent().append(n);e.onCreate&&e.onCreate({$position:e.position,$offset:{left:e.input.offsetLeft,top:e.input.offsetTop}})}()},hide:function(){i()},setData:function(t,n){return e.query=t,e.suggestions=function(t,e){return t.forEach(function(t){t.name.length>0?t.label='"'+s()(t.name)+'" &#60;'+s()(t.email)+"&#62;":t.label=s()(t.email);var n=new RegExp(r()(s()(e)),"gi");t.label=t.label.replace(n,function(t){return"<span class='email-suggestions-list__match'>"+t+"</span>"})}),t}(n,t),!e.visible&&n.length&&this.show(),o(0),this},setInput:function(t){return e.input=t,this}},e.clickItem=function(t){e.onClickItem&&e.onClickItem({$email:t}),i()}}}).call(this,n(36))},237:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i=n(35),o=n(495),s={notifications:{},usePrompt:!0};function a(t,e){var n=function(t){return Object(o.a)().tryCopyText(t)}(t),a=Object.assign(s,e);if(n){var r=a.notifications.successMessage;r&&Object(i.a)().show(r)}else{if(a.usePrompt)window.prompt("Copy to clipboard",t);else{var l=a.notifications.errorMessage;l&&Object(i.a)().showError(l)}}}},4315:function(t,e,n){var i=n(4316);"string"===typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(24)(i,o);i.locals&&(t.exports=i.locals)},4316:function(t,e,n){(t.exports=n(23)(!1)).push([t.i,".rtb-modal.select-users-modal {\n  z-index: 3002;\n}\n.rtb-modal.select-users-modal .rtb-modal-content {\n  padding-right: 52px;\n}\n.rtb-modal.select-users-modal .rtb-modal-content__header.rtb-modal-header {\n  min-height: 32px;\n}\n.rtb-modal.select-users-modal .rtb-modal-content__header.rtb-modal-header .rtb-modal-title__text {\n  transition: opacity 0.2s;\n}\n.rtb-modal.select-users-modal .rtb-modal-content__header.rtb-modal-header .rtb-modal-title__text.ng-hide {\n  opacity: 0;\n}\n.rtb-modal.select-users-modal .rtb-modal-content__header.rtb-modal-header .rtb-modal-title__icon {\n  width: 22px;\n  height: 22px;\n  margin-left: 8px;\n}\n.rtb-modal.select-users-modal .rtb-modal-content__body {\n  min-height: 40px;\n  margin: 16px 0 28px;\n}\n.rtb-modal.select-users-modal ~ .md-bg {\n  z-index: 3001;\n}\n.rtb-modal.select-users-modal .select-users-modal__access-rights {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-pack: justify;\n      justify-content: space-between;\n  font-style: normal;\n  font-stretch: normal;\n  letter-spacing: normal;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: normal;\n}\n.rtb-modal.select-users-modal .select-users-modal__access-rights .rtb-select {\n  width: 148px;\n}\n.rtb-modal.select-users-modal .filterable-users-list {\n  margin: 16px -52px 0 -52px;\n}\n.rtb-modal.select-users-modal .filterable-users-list .search-panel {\n  margin: 0 52px -1px 52px;\n  z-index: 10;\n}\n.rtb-modal.select-users-modal .filterable-users-list .scrollable {\n  margin-right: 0;\n}\n.rtb-modal.select-users-modal .filterable-users-list .scrollable-list {\n  max-height: 501px;\n  padding-left: 52px;\n  height: calc(100vh - 360px);\n}\n.rtb-modal.select-users-modal .filterable-users-list .scrollable--scroll-not-at-start,\n.rtb-modal.select-users-modal .filterable-users-list .scrollable--scroll-not-at-end {\n  display: block;\n  width: 100%;\n  height: 1px;\n  background-color: #c3c2cf;\n}\n.rtb-modal.select-users-modal .rtb-btn {\n  -ms-flex-negative: 0;\n      flex-shrink: 0;\n}\n.select-users-modal__access-rights-text {\n  display: inline-block;\n  max-width: 205px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  vertical-align: bottom;\n}\n",""])},4317:function(t,e){t.exports='<rtb-modal class="rtb-modal--medium rtb-modal--center select-users-modal">\n    <rtb-modal-close-button hm-tap="modal.cancel()" ng-show="!modal.params.loading" ></rtb-modal-close-button>\n    <div class="rtb-modal-container__content rtb-modal-content">\n        <div class="rtb-modal-content__header rtb-modal-header">\n            <div class="rtb-modal-header__title rtb-modal-title">\n                <div class="rtb-modal-title__text ng-hide" ng-show="modal.isInitialised">{{modal.title}}</div>\n                <img ng-if="modal.config.iconSrc" class="rtb-modal-title__icon" ng-src="{{modal.config.iconSrc}}">\n            </div>\n        </div>\n        <div class="rtb-modal-content__body">\n            <div class="select-users-modal__access-rights" ng-if="!!modal.params.accessRights">\n                <div class="description-section__text" ng-bind-html="modal.accessRightsText"></div>\n                <rtb-select class="rtb-select--secondary-bordered rtb-select--small" ng-model="modal.selectedAccessRight" options="modal.accessRights"></rtb-select>\n            </div>\n\n            <filterable-users-list ng-show="!modal.isLoading"\n                                   items="modal.usersList"\n                                   search-placeholder="\'Search by name or email\'"\n                                   on-check-changed="modal.onUsersSelectionChanged(checkedNumber)">\n            </filterable-users-list>\n            <material-spinner ng-show="modal.isLoading"></material-spinner>\n        </div>\n        <div class="rtb-modal-content__actions rtb-modal-actions">\n            <button class="rtb-btn rtb-btn--primary rtb-btn--medium"\n                    ng-class="{\'rtb-btn--loading\': modal.waitingForSubmit}"\n                    hm-tap="modal.submit()"\n                    ng-disabled="!modal.submitEnabled">\n                Send invitations\n            </button>\n        </div>\n    </div>\n</rtb-modal>'},4318:function(t,e){t.exports='<div class="email-suggestions-list" ng-show="visible" ng-style="{top: position.y, left: position.x}">\n    <div class="sg-item" ng-repeat="sg in suggestions track by $index" ng-mouseover="sgOver(sg)"\n         ng-class="{selected: sg.selected}"\n         hm-tap-down="clickItem(sg.email)"\n         ng-bind-html="sg.label"></div>\n</div>'},4319:function(t,e,n){var i=n(4320);"string"===typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(24)(i,o);i.locals&&(t.exports=i.locals)},4320:function(t,e,n){(t.exports=n(23)(!1)).push([t.i,".email-suggestions-list {\n  position: absolute;\n  z-index: 10;\n  top: 0;\n  left: 0;\n  background-color: #fff;\n  border: 1px solid #bcbcbc;\n}\n.email-suggestions-list .sg-item {\n  height: 24px;\n  line-height: 23px;\n  padding: 0 10px;\n  white-space: nowrap;\n  cursor: pointer;\n}\n.email-suggestions-list .sg-item.selected {\n  background-color: #eee;\n}\n.email-suggestions-list .email-suggestions-list__match {\n  font-weight: bold;\n}\n",""])},4321:function(t,e){t.exports='<div class="emails-editor" no-prevent-default="true" data-autotest-id="emailsEditor" hm-tap="setFocusOnInput($event)">\n    <span class="emails-editor__first-line-offset-holder"></span>\n    <span class="emails-editor__email" ng-repeat="email in controller.emails"\n          ng-class="{\'emails-editor__email--wrong\': isNotValid(email), \'emails-editor__email--edit-mode\': editEmailIndex === $index}">\n        <div class="emails-editor__input-content" ng-if="email === \'\'">x</div>\n        <div class="emails-editor__email-content">{{ email }}</div>\n        <div class="emails-editor__email-delete" hm-tap="deleteEmail($index, $event)"></div>\n        <input type="text"\n               class="emails-editor__email-input"\n               ng-model="email"\n               ng-blur="emailEditorOnBlur(email, $index)"\n               ng-focus="editEmail($event, $index)"\n               ng-keydown="emailEditorOnKeyDown($event)"\n               spellcheck="false">\n    </span>\n    <span class="emails-editor__email emails-editor__input-wrapper">\n        <div class="emails-editor__input-content" ng-if="enteredEmails === \'\'">x</div>\n        <div class="emails-editor__email-content emails-editor__input-content">{{ enteredEmails }}</div>\n        <input type="text"\n               ng-model="enteredEmails"\n               ng-blur="inputOnBlur()"\n               ng-paste="processInputAsync()"\n               ng-keydown="onKeyDown($event)"\n               ng-keyup="onKeyUp($event)"\n               ng-focus="inputOnFocus()"\n               placeholder="{{getPlaceholder() | translate}}"\n               class="emails-editor__email-input emails-editor__input focus-target"\n               spellcheck="false">\n    </span>\n    <email-suggestions-list on-click-item="onClickSuggestion($email)"\n                            on-create="onCreateSuggestions($position, $offset)"\n                            controller="suggestions"></email-suggestions-list>\n</div>'},4322:function(t,e,n){var i=n(4323);"string"===typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(24)(i,o);i.locals&&(t.exports=i.locals)},4323:function(t,e,n){(t.exports=n(23)(!1)).push([t.i,".emails-editor {\n  box-sizing: border-box;\n  width: 100%;\n  min-height: 40px;\n  background-color: #fff;\n  padding: 7px 4px 3px 6px;\n  color: #4d4d4d;\n}\n.emails-editor__email {\n  position: relative;\n  padding-left: 10px;\n  padding-right: 7px;\n  margin-right: 4px;\n  max-width: 100%;\n  box-sizing: border-box;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  margin-bottom: 3px;\n  height: 24px;\n  line-height: 24px;\n  background-color: rgba(102, 152, 255, 0.2);\n  border-radius: 12px;\n  font-size: 14px;\n}\n.emails-editor__email.emails-editor__email--wrong {\n  background-color: transparent;\n  color: rgba(5, 0, 56, 0.6);\n}\n.emails-editor__email.emails-editor__email--wrong .emails-editor__email-content {\n  border-bottom: 1px dashed #d14836;\n}\n.emails-editor__email.emails-editor__email--edit-mode {\n  padding-right: 16px;\n}\n.emails-editor__email.emails-editor__email--edit-mode .emails-editor__email-input {\n  opacity: 1;\n}\n.emails-editor__email.emails-editor__email--edit-mode .emails-editor__email-content {\n  opacity: 0;\n}\n.emails-editor__email.emails-editor__email--edit-mode .emails-editor__email-delete {\n  display: none;\n}\n.emails-editor__email-input {\n  position: absolute;\n  left: 10px;\n  height: inherit;\n  line-height: inherit;\n  width: calc(100% - 30px);\n  padding: 0;\n  margin: 0;\n  opacity: 0;\n  z-index: 1;\n}\n.emails-editor .emails-editor__email-input {\n  font-size: inherit !important;\n}\n.emails-editor__email-content {\n  position: relative;\n  max-width: calc(100% - 13px);\n  max-height: 100%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  display: inline-block;\n  vertical-align: middle;\n  padding-right: 6px;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .emails-editor__email-content {\n    max-width: none;\n  }\n}\n.emails-editor__email-delete {\n  display: inline-block;\n  height: 24px;\n  width: 10px;\n  font-size: 17px;\n  font-weight: lighter;\n  vertical-align: middle;\n  cursor: pointer;\n  margin-right: -1px;\n}\n.emails-editor__email-delete:before {\n  content: '\\D7';\n}\n.emails-editor__first-line-offset-holder {\n  display: block;\n  float: right;\n}\n.emails-editor__input-wrapper:nth-child(2) {\n  min-width: 160px;\n}\n.emails-editor__input-wrapper:nth-child(2) .emails-editor__input {\n  left: 4px;\n}\n.emails-editor__input-content {\n  opacity: 0;\n}\n.emails-editor__input {\n  left: 0;\n  width: 100%;\n  opacity: 1;\n}\n.emails-editor__input:-ms-input-placeholder {\n  color: #827f9b;\n}\n.emails-editor__input::placeholder {\n  color: #827f9b;\n}\n.emails-editor .emails-editor__email.emails-editor__email--edit-mode,\n.emails-editor .emails-editor__email.emails-editor__input-wrapper {\n  background: none;\n}\n",""])},4324:function(t,e,n){var i=n(4325);"string"===typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(24)(i,o);i.locals&&(t.exports=i.locals)},4325:function(t,e,n){(t.exports=n(23)(!1)).push([t.i,".auth-social-contacts {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: start;\n      align-items: flex-start;\n  cursor: pointer;\n  font-size: 12px;\n  line-height: 1.5;\n  color: #050038;\n}\n.auth-social-contacts .rtb-link.rtb-link--secondary {\n  color: #050038;\n}\n.auth-social-contacts.disabled {\n  pointer-events: none;\n  cursor: default;\n}\n.auth-social-contacts__item {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n}\n.auth-social-contacts__icon {\n  width: 16px;\n  height: 15px;\n  margin-right: 6px;\n}\n.auth-social-contacts__caption {\n  height: 16px;\n  font-weight: 600;\n}\n.auth-social-contacts__gap {\n  margin: 0 9px;\n}\n",""])},4326:function(t,e,n){t.exports='<div class="auth-social-contacts">\n    <span class="auth-social-contacts__item" hm-tap="ctrl.connectSlackContacts()">\n        <svg  class="auth-social-contacts__icon"  ><use xlink:href="'+n(4327)+'"></use></svg>\n        <span class="auth-social-contacts__caption rtb-link rtb-link--secondary rtb-link--dashed">Invite from Slack</span>\n    </span>\n    <span class="auth-social-contacts__gap" ng-if="!ctrl.isGoogleContactsAuthorized">or</span>\n    <span class="auth-social-contacts__item" ng-if="!ctrl.isGoogleContactsAuthorized" hm-tap="ctrl.connectGoogleContacts()">\n        <svg  class="auth-social-contacts__icon"  ><use xlink:href="'+n(4328)+'"></use></svg>\n        <span class="auth-social-contacts__caption rtb-link rtb-link--secondary rtb-link--dashed">Gmail contacts</span>\n    </span>\n</div>'},4327:function(t,e){t.exports="#application__slack-20"},4328:function(t,e){t.exports="#img__share-gmail"},634:function(t,e,n){"use strict";var i=n(21),o=n(32),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e.prototype.getSuggestions=function(t,e){var n=this;return new Promise(function(i){n.isUserAuthorized&&n.isUserAuthorized()?o.a.social.searchContacts(t,e).then(i).catch(function(){return i([])}):i([])})},e.prototype.getAllSuggestions=function(){return Promise.resolve([])},e.prototype.setAuthChecker=function(t){this.isUserAuthorized=t},e}(n(378).a);e.a=s},635:function(t,e,n){"use strict";var i;!function(t){t.EMAIL="EMAIL",t.SLACK="SLACK"}(i||(i={})),e.a=i},636:function(t,e,n){"use strict";(function(t,i){n.d(e,"a",function(){return _});var o=n(21),s=n(30),a=n(111),r=n.n(a),l=n(370),c=n.n(l),d=n(678),u=n.n(d),m=n(78),h=n(58),p=n(2138),g=n(1470),f=n(201),b=n(25),v=n(4321);function _(){return Object(p.a)(),n(4322),Object(b.b)().directive("emailsEditor",y),v}function y(){return Object(s.a)({restrict:"E",template:v,scope:{controller:"=",placeholder:"=",suggestionsProvider:"=",firstLineOffsetWidth:"@",firstLineOffsetHeight:"@",disabledPlaceholder:"@",emailsReadyHandler:"&",onChange:"&?",onFocus:"&?",onBlur:"&?"},link:E})}function E(e,n){var s=t(n).find(".emails-editor__input"),a=0,l=r()(function(){!function(t){var n=e.suggestionsProvider;n&&n.getSuggestions(t).then(function(n){""!=t&&n.data.length&&n.id>a?(a=n.id,e.suggestions.setInput(s[0].parentElement),e.suggestions.setData(t,n.data)):e.suggestions.hide(),e.$evalAsync(void 0)}).catch(function(){e.suggestions.hide(),e.$evalAsync(void 0)})}(e.enteredEmails)},500);e.setFocusOnInput=function(t){t.target==n.get(0)&&(!function(){if(i.isTouchSupportedAndNotDesktop){var t=n.find(".emails-editor__email-input:not(.emails-editor__input):focus");t.blur()}}(),b(!0))},e.firstLineOffsetWidth=parseInt(e.firstLineOffsetWidth,10)||0;var d=parseInt(e.firstLineOffsetHeight,10)||0;if(e.firstLineOffsetWidth>0){var p=t(n).find(".emails-editor__first-line-offset-holder");p.width(e.firstLineOffsetWidth),p.height(d)}function b(t){void 0===t&&(t=!1),i.isTouchSupportedAndNotDesktop&&!t||(t?s.focus():setTimeout(function(){s.focus()}))}function v(t){void 0===t&&(t=!1);var n=!1;t&&(n=function(){var t=!1;if(e.controller){var n=_(e.enteredEmails);n.length>0&&(e.controller.addEmails(n),t=!0),e.enteredEmails=""}return t}()),e.controller.emails=c()(e.controller.emails),e.onChange&&e.onChange(),e.suggestions.hide(),n&&E()}function _(t){return t.split(/[ ,;\t\n]+/).filter(function(t,e,n){return""!=t.trim()})}function y(){e.emailsReadyHandler({$ready:e.controller.getEmails().length>0})}function E(){s[0].scrollIntoView&&setTimeout(function(){s[0].scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})})}e.enteredEmails="",e.controller={emails:[],addEmails:function(t){t.length>0&&(this.emails=u()(this.emails.concat(t),function(t){return t.toLowerCase()}),y(),E())},getEmails:function(){return this.emails.concat(""==e.enteredEmails.trim()?[]:e.enteredEmails).map(function(t){return t.toLowerCase()})},getType:function(){return g.a.BULK},getCount:function(){return this.getEmails()?this.getEmails().length:0},replaceEmails:function(t,e){void 0===e&&(e=!0),this.emails=t,v(),e&&y()},replaceEmail:function(t,e){this.emails=Object(o.i)(this.emails.slice(0,e),t,this.emails.slice(e+1)),v()},setFocus:function(){b()},validate:function(){var t=!0;return c()(this.getEmails()).forEach(function(e){t=t&&m.t(e)}),t},setInvalidEmails:function(t){return e.setInvalidEmails(t)}},e.onKeyUp=function(t){t.keyCode==h.a.ENTER||f.a.isCharAs(t,[";",","])||t.keyCode==h.a.SPACE?v(!0):t.keyCode!=h.a.UP_ARROW&&t.keyCode!=h.a.DOWN_ARROW&&t.keyCode!=h.a.ESCAPE&&l(),y()},e.onKeyDown=function(t){t.keyCode==h.a.BACKSPACE&&0==e.enteredEmails.length&&e.controller.emails.length>0&&e.deleteEmail(e.controller.emails.length-1)},e.deleteEmail=function(t,n){e.controller.emails.splice(t,1),v(),y(),n&&n.stopPropagation()},e.processInputAsync=function(){setTimeout(function(){e&&(v(!0),e.$apply())},20)},e.onCreateSuggestions=function(t,e){var i=n.outerHeight(),o=n.prop("scrollHeight"),s=o>i?o-i:0;t.x=e.left,t.y=e.top+27-s},e.onClickSuggestion=function(t){e.controller.emails.push(t),e.enteredEmails="",v(),b(),y()},e.isNotValid=function(t){var n=e.invalidEmails&&e.invalidEmails.filter(function(e){return e===t.toLocaleLowerCase()});return!(!n||0===n.length)||!m.t(t)},e.getPlaceholder=function(){return e.controller.emails.length>0?"":e.placeholder},e.inputOnBlur=function(){e.processInputAsync(),e.onBlur&&e.onBlur()},e.inputOnFocus=function(){e.onFocus&&e.onFocus()},e.setInvalidEmails=function(t){e.invalidEmails=t},e.editEmail=function(t,n){e.editEmailIndex=n},e.emailEditorOnBlur=function(t,n){e.editEmailIndex=-1,e.controller.replaceEmail(_(t),n),y()},e.emailEditorOnKeyDown=function(t){t.keyCode!=h.a.ENTER&&t.keyCode!=h.a.ESCAPE&&t.keyCode!=h.a.SPACE||b()}}}).call(this,n(36),n(0))},767:function(t,e,n){"use strict";var i=n(30),o=n(34),s=n(26),a=function(){function t(t){var e=this;this.$scope=t,this.loading=!0,Object(o.a)().updateSocialAccounts().then(function(){e.isGoogleContactsAuthorized=Object(o.a)().socialAccounts.google.authorizedInGoogleContacts,e.loading=!1})}return t.prototype.connectGoogleContacts=function(){var t=this;this.loading||(this.$scope.onGoogleAuthClicked&&this.$scope.onGoogleAuthClicked(),Object(o.a)().socialAccounts.google.authorizedInGoogleContacts||Object(o.a)().socialAccounts.google.authorizeGoogleContacts().then(function(){t.isGoogleContactsAuthorized=!0,t.$scope.onGoogleAuthDone()}))},t.prototype.connectSlackContacts=function(){var t=this;this.loading||(this.$scope.onSlackAuthClicked&&this.$scope.onSlackAuthClicked(),Object(o.a)().socialAccounts.slack.authorizedInSlackContacts?this.$scope.onSlackAuthDone():Object(o.a)().socialAccounts.slack.authorizeSlackContacts().then(function(){s.gb(t.$scope.target),t.$scope.onSlackAuthDone()}))},t.$inject=["$scope"],t}(),r=n(25);function l(){n(4324),Object(r.b)().directive("authSocialContacts",c)}function c(){return Object(i.a)({restrict:"E",template:n(4326),controller:a,controllerAs:"ctrl",scope:{onGoogleAuthClicked:"&",onGoogleAuthDone:"&",onSlackAuthClicked:"&",onSlackAuthDone:"&",target:"="}})}n.d(e,"a",function(){return l})},962:function(t,e,n){"use strict";var i=n(46),o=n(44),s=n(21),a=n(48),r=n(34),l=n(26),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLoading=!0,e.isInitialised=!1,e.submitEnabled=!1,e.waitingForSubmit=!1,e}return Object(s.d)(e,t),e.prototype.init=function(){var t=this,e={slack:{users:Object(r.a)().socialAccounts.slack.getContacts,iconSrc:n(1460),title:"Invite members from Slack",getUsersStat:l.Yi,chooseUsersStat:l.Ib,getAccessRightsText:function(t){return'Choose members and access rights to<br><b class="select-users-modal__access-rights-text">'+t[0]+"</b> board."}}};this.config=e[this.params.source],this.config&&(this.title=this.params.title||this.config.title,this.config.users().then(function(e){t.config.getUsersStat&&t.config.getUsersStat(e.length),t.usersList=e,t.isLoading=!1,t.$scope.safeApply()}),this.chooseUsersStat=this.config.chooseUsersStat,this.params.accessRights&&(this.accessRightsText=this.config.getAccessRightsText(this.params.accessRightsTextParams),this.accessRights=this.params.accessRights,this.selectedAccessRight=this.params.selectedAccessRight)),this.isInitialised=!0},e.prototype.submit=function(){var e=this;if(!this.waitingForSubmit){this.waitingForSubmit=!0;var n=this.usersList.filter(function(t){return t.checked}).map(function(t){return t.email});this.chooseUsersStat&&this.chooseUsersStat(n.length),this.params.submitHandler?this.params.submitHandler({invitees:n,role:this.selectedAccessRight}).then(function(){t.prototype.submit.call(e)}).catch(function(){e.waitingForSubmit=!1}):t.prototype.submit.call(this,{invitees:n,role:this.selectedAccessRight})}},e.prototype.onUsersSelectionChanged=function(t){this.submitEnabled=t>0},e}(a.b),d=n(540),u=n(62),m=n(67);e.a=function(t){return Object(u.a)(),Object(m.a)(),Object(d.a)(),n(4315),i.a(o.a.SELECT_USERS,c,n(4317),t)}}}]);
//# sourceMappingURL=cmn~ShaAndInv~Wel.b4059a2bc1ea42fe9af3.js.map