(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1476:function(e,s,n){"use strict";n.d(s,"b",function(){return a}),n.d(s,"a",function(){return l});var t=n(21),i=n(927),r=n(147),a="REMOVE",l=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return Object(t.d)(s,e),s.prototype.mapBy=function(e){return e&&e.email},s.prototype.makeDeleteProperty=function(e){var s=this;Object.defineProperty(e,"delete",{get:function(){return function(){return s.delete(e)}}})},s.prototype.makeChangeRoleProperty=function(e,s){var n=this;Object.defineProperty(e,"changeRole",{get:function(){return function(t){return e.role=t.value,n.searchParam.onChangeRole(e,t).then(function(i){return i?e.role=t.value:e.options=n.makeOptions(s,n.searchParam),i})}}})},s.prototype.getRemoveKey=function(){return a},s.prototype.setFiltersByRole=function(e){return"all"===e?this.search({search:void 0,roles:void 0},!1,!0):this.search({search:void 0,roles:[e]},!1,!0)},s.prototype.loadObjects=function(s,n,t){var i=this;return this.isOldLoader(this.loader)?this.loader({limit:n,offset:t,search:s.search,roles:s.roles||[r.a.COMMENTATOR,r.a.EDITOR,r.a.VIEWER]}).then(function(e){i._currentArrayCount=e.size;var n=e.data||[];return i.convert(n,s)}):e.prototype.loadObjects.call(this,s,n,t)},s.prototype.getCommonOptions=function(e){return[{key:"Can edit",value:r.a.EDITOR,selected:e==r.a.EDITOR},{key:"Can comment",value:r.a.COMMENTATOR,selected:e===r.a.COMMENTATOR},{key:"Can view",value:r.a.VIEWER,selected:e===r.a.VIEWER}]},s.prototype.load=function(e,s){var n=this;return this.loadObjects(e,s,this.currentOffset).then(function(s){n.currentOffset?n.cache=n.mergeArrays(n.cache,s):n.postLoadCacheEnabled&&(e.roles||e.search)?n.cache=s:n.cache=n.mergeArrays(n.staticAdditionBefore,s)})},s}(i.a)},2363:function(e,s,n){"use strict";var t=n(30),i=n(21),r=n(147),a=n(58),l=n(562),o=n(33),c=n(111),u=n.n(c),p=n(149),d=n.n(p),h=n(201),m=n(929),_=n(187),f=function(e){function s(s,n){var t=e.call(this,s)||this;return t.scope=s,t.vsRepeatOptions={autoresize:!1,size:52,scrollContainerClass:"users-list--height"},t.lastSelectedRole="all",t.expandedSearch=!1,t.searchString="",t.tabs=[{name:"all",isActive:!0,title:"All users"},{name:r.a.VIEWER,isActive:!1,title:"Viewers"},{name:r.a.COMMENTATOR,isActive:!1,title:"Commenters"},{name:r.a.EDITOR,isActive:!1,title:"Editors"}],t.searchContent=u()(t.searchContent,500,{leading:!1,trailing:!0}),s.$on("vsRepeatReinitialized",function(e,i,r){if(t.scope.enableRoleFilters&&!t.searchInput){t.searchInput=n.find("#users-list__search__input");var a=n.find(".users-list__search");a.on("transitionend",t.onExpand.bind(t)),s.$on("$destroy",function(){a.off("transitionend")})}}),t}return Object(i.d)(s,e),Object.defineProperty(s.prototype,"storage",{get:function(){return this.scope.searchStorage},enumerable:!0,configurable:!0}),s.prototype.getRoleText=function(e){return e&&Object(o.F)(e.role)},Object.defineProperty(s.prototype,"filtersEnable",{get:function(){return this.scope.enableRoleFilters},enumerable:!0,configurable:!0}),s.prototype.onTabClick=function(e,s){var n=this,t=this.storage;t&&(this.loaded=!1,this.scope.safeApply(),this.lastSelectedRole=s.name,t.setFiltersByRole(this.lastSelectedRole).then(function(){n.searchString="",n.loaded=!0,n.scope.safeApply()}))},s.prototype.searchInputKeyUp=function(e){if(Object(h.k)(e))return this.searchContent();switch(e.keyCode){case a.a.ESCAPE:this.collapse();break;case a.a.DELETE:case a.a.BACKSPACE:this.searchContent()}},s.prototype.makeRegexp=function(e,s){var n,t=!1,i=e.replace(/([\{\}\[\]\(\)\+\?\^\$\*\.\!\\])/gi,function(e){return t=!0,"\\"+e});try{n=new RegExp(t?"("+i+")|("+e+")":e,s)}catch(e){n=new RegExp(i,s)}return n},s.prototype.searchContent=function(){var e=this,s=this.storage;if(s){this.loaded=!1;var n=this.searchString.trim();this.nameFilterRegexp=this.makeRegexp(""+n,"i"),this.emailFilterRegexp=this.makeRegexp(""+n,"i"),this.scope.safeApply(),s.search({search:n,roles:void 0},!1,!0).then(function(){e.loaded=!0,e.scope.safeApply()})}},s.prototype.cancelButtonClick=function(){this.collapse()},s.prototype.searchInputBlur=function(){""===this.searchString.trim()&&this.collapse()},s.prototype.searchButtonClick=function(){var e=this;this.expand();var s=this.storage;s&&(this.loaded=!1,this.tabs.forEach(function(e){return e.isActive=!1}),this.tabs[0].isActive=!0,this.scope.safeApply(),s.setFiltersByRole("all").then(function(){e.loaded=!0,e.scope.safeApply()}))},s.prototype.expand=function(){this.expandedSearch=!0},s.prototype.collapse=function(){var e=this;this.expandedSearch=!1;var s=this.storage;this.scope.safeApply(),s&&(this.loaded=!1,s.setFiltersByRole(this.lastSelectedRole).then(function(){e.searchString="",e.loaded=!0,e.scope.safeApply()}))},s.prototype.onExpand=function(){this.searchInput.focus(),this.searchInput.select()},s.prototype.getNeedRequestLicenseToEdit=function(e){return!e.deactivated&&e.accountConnection&&e.accountConnection.organizationConnection&&e.accountConnection.organizationConnection.license===_.a.FREE_RESTRICTED&&(e.role===r.a.EDITOR||e.role===r.a.OWNER)},s.prototype.onChangeRole=function(e,s){var n=this,t=e&&e.loadedItem,i=this.storage;t&&i&&t.role!==s.value&&(s.value===i.getRemoveKey()||"all"!==this.lastSelectedRole&&!this.searchString.trim()?t.changeRole(s).then(function(e){e&&(t.removed=!0,setTimeout(function(){t.delete(),n.scope.safeDigest()},200),n.scope.safeDigest())}):t.changeRole(s).then(function(e){n.scope.safeDigest()}),this.scope.safeDigest())},s.prototype.highlightStr=function(e,s){return s.replace(e,function(e){return Object(l.a)("<span>"+e+"</span>","span")})},s.prototype.highlightName=function(e){return e&&this.searchString.trim()?this.highlightStr(this.nameFilterRegexp,e):d()(e)},s.prototype.highlightEmail=function(e){return e&&this.searchString.trim()?this.highlightStr(this.emailFilterRegexp,e):d()(e)},s.$inject=["$scope","$element"],s}(m.a),g=n(766),x=n(25),v=n(1591),b=n(116),y=n(43),R=n(2121),w=function(e){function s(){return null!==e&&e.apply(this,arguments)||this}return Object(i.d)(s,e),s.prototype.render=function(){return y.React.createElement(R.a,Object(i.a)({},this.props,{anchor:y.React.createElement("svg",{alt:"Alert"},y.React.createElement("use",{xlinkHref:n(4418)}))}))},s}(y.React.PureComponent);function C(){n(4419),Object(g.a)(),Object(v.a)(),Object(x.b)().component("iconWithRequestLicenseInfo",Object(b.b)(w,["className","accountConnection"])),Object(x.b)().directive("accessUsersList",E)}function E(){return Object(t.a)({restrict:"E",template:n(4421),controller:f,controllerAs:"controller",transclude:!0,scope:{searchStorage:"=",enableRoleFilters:"="}})}n.d(s,"a",function(){return C})},4418:function(e,s){e.exports="#accessuserslist__ic-alert"},4419:function(e,s,n){var t=n(4420);"string"===typeof t&&(t=[[e.i,t,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(24)(t,i);t.locals&&(e.exports=t.locals)},4420:function(e,s,n){(e.exports=n(23)(!1)).push([e.i,"/**\n  \u041e\u0431\u0449\u0438\u0435 \u043c\u0438\u043a\u0441\u0438\u043d\u044b \u0434\u043b\u044f account & application.\n */\n@keyframes ContentPlaceholderGradient {\n  from {\n    background-position: 100% 50%;\n  }\n  to {\n    background-position: 0 50%;\n  }\n}\n@keyframes spinner {\n  to {\n    transform: rotate(360deg);\n  }\n}\n.users-list--access .grey-loading {\n  position: absolute;\n  min-height: 14px;\n  width: 100%;\n  pointer-events: none;\n  background-attachment: fixed;\n  background: linear-gradient(-90deg, #f0f0f3 35%, #fff 50%, #f0f0f3 65%);\n  background-size: 400vw 400vh;\n  animation: ContentPlaceholderGradient 5s ease infinite;\n  transition: opacity 0.1s ease-in;\n  opacity: 0;\n}\n.users-list--access .user-item--loading .grey-loading {\n  opacity: 1;\n}\n.users-list--access .grey-loading__top {\n  top: 3px;\n}\n.users-list--access .grey-loading__bottom {\n  bottom: 3px;\n  left: 0;\n  width: calc(100% + 120px);\n}\n.users-list--access .user-item {\n  height: 52px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-line-pack: center;\n      align-content: center;\n  font-size: 14px;\n  transition: height 100ms ease-in, opacity 100ms ease-in;\n}\n.users-list--access .user-item .user-item__deactivated-block {\n  font-size: 11px;\n  line-height: 16px;\n  letter-spacing: 0.5px;\n  left: 144px;\n  top: 1px;\n  position: absolute;\n}\n.users-list--access .user-item .user-item--flex-segment {\n  -ms-flex: 0 0;\n      flex: 0 0;\n}\n.users-list--access .user-item .user-picture,\n.users-list--access .user-item .loading-picture {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n}\n.users-list--access .user-item .user-picture img {\n  width: 36px;\n  height: 36px;\n  min-width: 36px;\n  max-width: 36px;\n  min-height: 36px;\n  max-height: 36px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .users-list--access .user-item .user-picture img {\n    width: auto;\n    height: auto;\n  }\n}\n.users-list--access .user-item.user-item--removed {\n  height: 0;\n  opacity: 0;\n}\n.users-list--access .user-item .user-item__picture {\n  position: relative;\n  min-width: 52px;\n  min-height: 52px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-line-pack: center;\n      align-content: center;\n}\n.users-list--access .user-item .user-item__picture--deactivated div img {\n  opacity: 0.2;\n}\n.users-list--access .user-item .user-item--info {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-pack: distribute;\n      justify-content: space-around;\n  min-height: 40px;\n  position: relative;\n}\n.users-list--access .user-item .user-item--info.user-item--flex-segment {\n  -ms-flex: 1 1 100%;\n      flex: 1 1 100%;\n  -ms-flex-align: start;\n      align-items: flex-start;\n}\n.users-list--access .user-item .user-item--name,\n.users-list--access .user-item .user-item--email {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  line-height: 20px;\n  width: 100%;\n}\n.users-list--access .user-item .user-item--name span,\n.users-list--access .user-item .user-item--email span {\n  color: #4262ff;\n}\n.users-list--access .user-item .user-item--name {\n  width: 64%;\n}\n.users-list--access .user-item .user-item--email {\n  color: #827f9b;\n}\n.users-list--access .user-item .user-item--select {\n  min-width: 140px;\n  position: relative;\n  min-height: 40px;\n  max-height: 40px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: end;\n      justify-content: flex-end;\n}\n.users-list--access .user-item .user-item--select .users-list-access__request-license-info {\n  height: 14px;\n  width: 14px;\n  display: inline-block;\n  padding: 2px 0 0 8px;\n}\n.users-list--access .user-item .user-item--select .users-list-access__request-license-info svg {\n  width: 14px;\n  height: 14px;\n  min-width: 14px;\n  max-width: 14px;\n  min-height: 14px;\n  max-height: 14px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .users-list--access .user-item .user-item--select .users-list-access__request-license-info svg {\n    width: auto;\n    height: auto;\n  }\n}\n.users-list--access .user-item .user-item--select .select-input .select-value {\n  height: 31px;\n  font-size: 14px;\n  line-height: normal;\n  padding: 0 17px 0 7px;\n}\n.users-list--access .user-item .user-item--select .user-item--readonly {\n  color: #4262ff;\n  min-height: 14px;\n  padding: 0 20px 0 8px;\n}\n.users-list--access .users-list--padding {\n  padding: 0;\n}\n.users-list--access .user-item--padding {\n  padding: 0 16px 0 0;\n}\n.users-list--access .users-list--loading {\n  overflow: hidden;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: column;\n      flex-direction: column;\n}\n.users-list--access .users-list--loading .users-list--loading-spinner {\n  -ms-flex: 1 1 100vh;\n      flex: 1 1 100vh;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-direction: row;\n      flex-direction: row;\n}\n.users-list--access .users-list__header {\n  position: relative;\n  margin-bottom: -1px;\n}\n.users-list--access .users-list__header .users-list__filters {\n  transition: opacity 0.3s ease-out;\n  opacity: 1;\n}\n.users-list--access .users-list__header .users-list__search {\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  display: -ms-flexbox;\n  display: flex;\n  transition: width 0.3s ease-out;\n  width: 0;\n  background: #fff;\n  z-index: 2;\n}\n.users-list--access .users-list__header.users-list__search--expanded .users-list__filters {\n  opacity: 0;\n}\n.users-list--access .users-list__header.users-list__search--expanded .users-list__search {\n  width: calc(100% - 70px);\n}\n.users-list--access .users-list__header.users-list__search--expanded .users-list__search .users-list__search__inner {\n  width: 100%;\n}\n.users-list--access .users-list__header.users-list__search--expanded .users-list__search .users-list__search__inner .users-list__search__cancel,\n.users-list--access .users-list__header.users-list__search--expanded .users-list__search .users-list__search__inner .users-list__search__input {\n  display: block;\n}\n.users-list--access .users-list__header.users-list__search--expanded .users-list__search .users-list__search__button {\n  display: none;\n}\n.users-list--access .users-list__header .users-list__search__inner {\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  height: 34px;\n  width: 0;\n  overflow: hidden;\n  padding-bottom: 16px;\n  border-bottom: solid 2px #4262ff;\n  box-sizing: border-box;\n}\n.users-list--access .users-list__header .users-list__search__inner > * {\n  display: none;\n}\n.users-list--access .users-list__header .users-list__search__button {\n  position: absolute;\n  right: 0;\n  height: 36px;\n  width: 20px;\n}\n.users-list--access .users-list__header .users-list__search__button .icon {\n  cursor: pointer;\n  color: #00000099;\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  max-width: 24px;\n  min-height: 24px;\n  max-height: 24px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .users-list--access .users-list__header .users-list__search__button .icon {\n    width: auto;\n    height: auto;\n  }\n}\n.users-list--access .users-list__header .users-list__search__button .icon:hover {\n  color: #000;\n}\n.users-list--access .users-list__header .users-list__search__input {\n  -ms-flex-positive: 1;\n      flex-grow: 1;\n  padding: 0;\n  background-color: inherit;\n  cursor: inherit;\n  color: inherit;\n  font-size: 13px;\n}\n.users-list--access .users-list__header .users-list__search__input::-webkit-input-placeholder {\n  color: #827f9b;\n}\n.users-list--access .users-list__header .users-list__search__input::-moz-placeholder {\n  color: #827f9b;\n}\n.users-list--access .users-list__header .users-list__search__input:-moz-placeholder {\n  color: #827f9b;\n}\n.users-list--access .users-list__header .users-list__search__input:-ms-input-placeholder {\n  color: #827f9b;\n}\n.users-list--access .users-list__header .users-list__search__input::-ms-input-placeholder {\n  color: #827f9b;\n}\n.users-list--access .users-list__header .users-list__search__input:-ms-input-placeholder {\n  color: #827f9b;\n  opacity: 1;\n  /* Firefox */\n}\n.users-list--access .users-list__header .users-list__search__input::placeholder {\n  color: #827f9b;\n  opacity: 1;\n  /* Firefox */\n}\n.users-list--access .users-list__header .users-list__search__cancel {\n  margin-left: 10px;\n  color: #827f9b;\n  cursor: pointer;\n}\n.users-list--access .users-list__header .users-list__search__cancel:hover {\n  color: inherit;\n}\n.users-list--access .users-list__header--lock {\n  pointer-events: none;\n}\n.users-list--access .user-item_filter-mod {\n  margin-top: 1px;\n}\n.users-list--access .user-item_filter-mod .scrollable--scroll-not-at-start,\n.users-list--access .user-item_filter-mod .scrollable--scroll-not-at-end {\n  display: none;\n}\n.users-list--access .users-list__header .users-list__tabs-header {\n  border: none;\n  margin: 0;\n}\n.users-list--access .users-list__splitter {\n  height: 1px;\n  width: 100%;\n  background: #c3c2cf;\n}\n.users-list--access .users-list__tabs-header .tab {\n  font-size: 14px;\n  margin-right: 24px;\n  z-index: 2;\n}\n.users-list--access .users-list--no-items {\n  height: 100%;\n  -ms-flex-align: center;\n      align-items: center;\n  -ms-flex-pack: center;\n      justify-content: center;\n  display: -ms-flexbox;\n  display: flex;\n}\n@keyframes Gradient {\n  from {\n    background-position: 100% 50%;\n  }\n  to {\n    background-position: 0 50%;\n  }\n}\n",""])},4421:function(e,s,n){e.exports='<div class="users-list--access">\n    <div class="users-list__header"\n         ng-if="controller.filtersEnable"\n         ng-class="{\'users-list__search--expanded\': controller.expandedSearch, \'users-list__header--lock\':controller.loading}">\n        <tabs tabs="controller.tabs"\n              class="users-list__filters"\n              header-class="\'users-list__tabs-header\'"\n              on-tab-click="controller.onTabClick($event, tab)"></tabs>\n        <div class="users-list__search">\n            <div class="users-list__search__inner">\n                <input class="users-list__search__input"\n                       type="text"\n                       id="users-list__search__input"\n                       placeholder="Search"\n                       ng-model="controller.searchString"\n                       ng-keyup="controller.searchInputKeyUp($event)"\n                       ng-blur="controller.searchInputBlur()">\n                <div class="users-list__search__cancel" hm-tap="controller.cancelButtonClick()">Cancel</div>\n            </div>\n            <div class="users-list__search__button">\n                <svg  class="icon"   hm-tap="controller.searchButtonClick()"><use xlink:href="'+n(4422)+'"></use></svg>\n            </div>\n        </div>\n    </div>\n    <div class="users-list__splitter" ng-if="controller.filtersEnable"></div>\n    <div ng-if="!controller.loading && controller.hasItems"\n         class="users-list--padding"\n         ng-class="{\'user-item_filter-mod\':controller.filtersEnable}"\n         vs-repeat="controller.vsRepeatOptions">\n        <div class="user-item user-item--padding"\n             ng-class="{\'user-item--loading\':!userWrapper.loaded, \'user-item--removed\':userWrapper.loadedItem.removed}"\n             ng-repeat="userWrapper in controller.items track by userWrapper.id">\n            <div class="user-item__picture user-item--flex-segment" ng-class="{\'user-item__picture--deactivated\': userWrapper.loadedItem.deactivated}">\n                <user-picture\n                        ng-if="userWrapper.loaded"\n                        picture-url="{{userWrapper.loadedItem.picture && userWrapper.loadedItem.picture.medium}}">\n                </user-picture>\n                <div class="loading-picture grey-loading"></div>\n            </div>\n            <div class="user-item--info user-item--flex-segment">\n                <div class="user-item--name" ng-bind-html="controller.highlightName(userWrapper.loadedItem.name)">\n                </div>\n                <rtb-user-badge class="user-item__deactivated-block" ng-if="userWrapper.loadedItem.deactivated"></rtb-user-badge>\n                <div class="user-item--email" ng-bind-html="controller.highlightEmail(userWrapper.loadedItem.email)">\n                </div>\n                <div class="grey-loading grey-loading__top"></div>\n                <div class="grey-loading grey-loading__bottom"></div>\n            </div>\n            <div class="user-item--select user-item--flex-segment">\n                <icon-with-request-license-info\n                        ng-if="userWrapper.loaded && controller.getNeedRequestLicenseToEdit(userWrapper.loadedItem)"\n                        class-name="\'users-list-access__request-license-info\'"\n                        account-connection="userWrapper.loadedItem.accountConnection"\n                ></icon-with-request-license-info>\n                <select-input options="userWrapper.loadedItem.options"\n                              ng-if="userWrapper.loaded &&  userWrapper.loadedItem.canChangePermission"\n                              on-selected="controller.onChangeRole(userWrapper, option)">\n                </select-input>\n                <div class="user-item--readonly"\n                     ng-if="userWrapper.loaded && !userWrapper.loadedItem.canChangePermission">\n                    {{controller.getRoleText(userWrapper.loadedItem) || userWrapper.loadedItem.role}}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="users-list--loading {{controller.vsRepeatOptions.scrollContainerClass}}"\n         ng-class="{\'user-item_filter-mod\':controller.filtersEnable}"\n         ng-if="controller.loading">\n        <div class="users-list--loading-spinner">\n            <material-spinner color="\'#CCCCCC\'"></material-spinner>\n        </div>\n    </div>\n    <div ng-if="!controller.hasItems && !controller.loading"\n         class="users-list--no-items {{controller.vsRepeatOptions.scrollContainerClass}}"\n         ng-transclude\n         ng-class="{\'user-item_filter-mod\':controller.filtersEnable}">\n    </div>\n    <div class="users-list__splitter" ng-if="controller.filtersEnable"></div>\n</div>\n'},4422:function(e,s){e.exports="#img__ic-search"}}]);
//# sourceMappingURL=cmn~Bil~Pro~ShaAndInv.2dea2225ecf34a95b563.js.map