(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1138:function(e,t,n){var o=n(670)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=o},1140:function(e,t,n){var o=n(1141);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(24)(o,r);o.locals&&(e.exports=o.locals)},1141:function(e,t,n){(e.exports=n(23)(!1)).push([e.i,"div.rtb-select {\n  position: relative;\n  display: inline-block;\n}\ndiv.rtb-select .rtb-select__popup {\n  z-index: 100;\n  transition: opacity 0.2s ease-out;\n}\ndiv.rtb-select .rtb-select__popup.ng-enter,\ndiv.rtb-select .rtb-select__popup.ng-enter-prepare,\ndiv.rtb-select .rtb-select__popup.ng-leave.ng-leave-active {\n  opacity: 0;\n}\ndiv.rtb-select .rtb-select__popup.ng-leave,\ndiv.rtb-select .rtb-select__popup.ng-enter.ng-enter-active {\n  opacity: 1;\n}\n.rtb-select__alert-icon {\n  padding-right: 8px;\n  width: 14px;\n  height: 14px;\n  position: relative;\n  top: 2px;\n}\n.rtb-select__button {\n  width: 100%;\n  text-align: left;\n}\n.rtb-select__button.rtb-select__button--placeholder .rtb-select__button-text {\n  opacity: 0.4;\n}\n.rtb-select__button img {\n  margin-right: 20px;\n  border-radius: 2px;\n  width: 36px;\n  height: 36px;\n  vertical-align: middle;\n}\n.rtb-select__button .rtb-select__button-text {\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.rtb-select__button .rtb-select__button-text img {\n  width: 36px;\n  height: 36px;\n  min-width: 36px;\n  max-width: 36px;\n  min-height: 36px;\n  max-height: 36px;\n  overflow: hidden;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .rtb-select__button .rtb-select__button-text img {\n    width: auto;\n    height: auto;\n  }\n}\n.rtb-select__options-wrapper {\n  position: absolute;\n  z-index: 100;\n  min-width: calc(100% - 4px);\n  margin: 4px 0;\n  padding: 4px 4px 4px 0;\n  box-shadow: 0 8px 16px 0 rgba(5, 0, 56, 0.12);\n  border-radius: 4px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  transition-property: opacity;\n  transition-duration: 0.2s;\n  background-color: #fff;\n}\n.rtb-select__options-wrapper.rtb-select__options-wrapper--popper {\n  position: relative;\n}\n.rtb-select__options-wrapper.ng-enter,\n.rtb-select__options-wrapper.ng-enter-prepare,\n.rtb-select__options-wrapper.ng-leave.ng-leave-active {\n  opacity: 0;\n}\n.rtb-select__options-wrapper.ng-leave,\n.rtb-select__options-wrapper.ng-enter.ng-enter-active {\n  opacity: 1;\n}\n.rtb-select__options {\n  overflow: hidden;\n  width: 100%;\n  max-height: 33vh;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 4px 4px 4px 0;\n  list-style-type: none;\n  overflow-y: auto;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-color: #c3c2cf transparent;\n  scrollbar-width: thin;\n}\n.rtb-select__options::-webkit-scrollbar {\n  width: 4px;\n  height: 4px;\n}\n.rtb-select__options::-webkit-scrollbar-thumb {\n  background-color: #c3c2cf;\n  border: 0 solid transparent;\n  border-radius: 2px;\n}\n.rtb-select__options::-webkit-scrollbar-track {\n  background-color: initial;\n}\n.rtb-select--large .rtb-select__options {\n  padding-left: 20px;\n}\n.rtb-select--large .rtb-select__options .rtb-select__option {\n  height: 60px;\n  line-height: 60px;\n  font-size: 20px;\n}\n.rtb-select--medium .rtb-select__options {\n  padding-left: 16px;\n}\n.rtb-select--medium .rtb-select__options .rtb-select__option {\n  height: 48px;\n  line-height: 48px;\n  font-size: 16px;\n}\n.rtb-select--40px .rtb-select__options {\n  padding-left: 16px;\n}\n.rtb-select--40px .rtb-select__options .rtb-select__option {\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n}\n.rtb-select--small .rtb-select__options {\n  padding-left: 14px;\n}\n.rtb-select--small .rtb-select__options .rtb-select__option {\n  height: 36px;\n  line-height: 36px;\n  font-size: 14px;\n}\n.rtb-select__option {\n  display: -ms-flexbox;\n  display: flex;\n  width: 100%;\n  padding: 0;\n  text-align: left;\n  cursor: pointer;\n  white-space: nowrap;\n}\n.rtb-select__option:hover:not([disabled]),\n.rtb-select__options:not(:hover) .rtb-select__option:focus,\n.rtb-select__options:not(:hover) .rtb-select__option.rtb-select__option--focused {\n  color: #4262ff;\n}\n.rtb-select__option[disabled] {\n  opacity: 0.4;\n}\n.rtb-select__option > img {\n  width: 24px;\n  height: 24px;\n  min-width: 24px;\n  max-width: 24px;\n  min-height: 24px;\n  max-height: 24px;\n  overflow: hidden;\n  margin-right: 12px;\n  border-radius: 2px;\n  vertical-align: middle;\n}\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .rtb-select__option > img {\n    width: auto;\n    height: auto;\n  }\n}\n.rtb-select__divider {\n  display: block;\n  width: 100%;\n  border-bottom: 1px solid #ebebef;\n  margin: 8px 0;\n}\n",""])},142:function(e,t,n){"use strict";var o;!function(e){e.EDIT_BOARD_PARAMS="EDIT_BOARD_PARAMS",e.SET_CAMERA_DATA="SET_CAMERA_DATA",e.SET_PRESENTATION="SET_PRESENTATION",e.EDIT_BOARD_PUBLICITY="EDIT_BOARD_PUBLICITY",e.EDIT_BOARD_ACCESS_LINK="EDIT_BOARD_ACCESS_LINK",e.SHARE_BOARD_ON_ACCOUNT="SHARE_BOARD_ON_ACCOUNT",e.EDIT_USERS="EDIT_USERS",e.SET_OWNER="SET_OWNER",e.TRASH_BOARD="TRASH_BOARD",e.WRITE_TO_CHAT="WRITE_TO_CHAT",e.USE_SCREEN_SHARING="USE_SCREEN_SHARING",e.USE_VIDEO_CHAT="USE_VIDEO_CHAT",e.GET_BOARD_ARCHIVE="GET_BOARD_ARCHIVE",e.VIEW_BOARD="VIEW_BOARD",e.EDIT_WIDGETS="EDIT_WIDGETS",e.WRITE_COMMENT="WRITE_COMMENT",e.VIEW_JIRA_CARDS_RESOURCES="VIEW_JIRA_CARDS_RESOURCES",e.INVITE_TO_ACCOUNT_AND_BOARD_BY_LINK="INVITE_TO_ACCOUNT_AND_BOARD_BY_LINK",e.TOGGLE_INVITE_TO_ACCOUNT_AND_BOARD_BY_LINK="TOGGLE_INVITE_TO_ACCOUNT_AND_BOARD_BY_LINK",e.LEAVE_BOARD="LEAVE_BOARD"}(o||(o={})),t.a=o},1473:function(e,t,n){"use strict";var o=n(21),r=function(e){function t(){return e.call(this,"CHANGE_PAY_LIMIT_CANCELED","ChangePayLimitCanceledInvitationError")||this}return Object(o.d)(t,e),t}(n(292).a);t.a=r},149:function(e,t,n){var o=n(1138),r=n(262),i=/[&<>"']/g,a=RegExp(i.source);e.exports=function(e){return(e=r(e))&&a.test(e)?e.replace(i,o):e}},2144:function(e,t,n){"use strict";var o=n(21),r=function(e){function t(t){var n=e.call(this,"RTB_TEAM_LIMIT_REACHED","TeamLimitReachedInvitationError")||this;return n.limits=t,n}return Object(o.d)(t,e),t}(n(292).a);t.a=r},2145:function(e,t,n){"use strict";var o=n(21),r=function(e){function t(){return e.call(this,"UPGRADE_ACCOUNT_FORBIDDEN","UpgradeAccountForbiddenInvitationError")||this}return Object(o.d)(t,e),t}(n(292).a);t.a=r},2146:function(e,t,n){"use strict";var o=n(21),r=function(e){function t(){return e.call(this,"POST_PAYMENT_LIMIT_CHANGE_FAIL","PostPaymentLimitChangeInvitationError")||this}return Object(o.d)(t,e),t}(n(292).a);t.a=r},2367:function(e,t,n){"use strict";var o,r=n(21),i=n(48),a=n(147),s=n(142),c=n(32),d=n(35),l=n(72),u=n(39),p=n(34),h=n(106),m=n(26),b=n(33),f=n(169),g=n(322),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.d)(t,e),t.prototype.convert=function(e,t){var n=this;return e.map(function(e){var o=!t.readonly&&e.role!==a.a.OWNER,r={email:e.user.email,role:e.role,picture:e.user.picture,userId:e.user.id,permissionId:e.id,name:"NoName"===e.user.name?"Invited":e.user.name,canChangePermission:o,options:n.makeOptions(e,t),accountConnection:e.accountConnection};return n.makeDeleteProperty(r),n.makeChangeRoleProperty(r,e),r})},t.prototype.makeOptions=function(e,t){var n=e.role,o=this.getCommonOptions(n);return t.addOwnerOption&&o.push({key:"Is owner",value:a.a.OWNER,selected:n===a.a.OWNER}),o.push({key:"Remove",value:this.getRemoveKey(),selected:!1}),o},t}(n(1476).a),v=n(53),A=n(4416),O=n(54),y=n(347),E=n(209),C=n(79),I=n(213),x=l.b(),w=d.b(),R=u.b(),T=p.b(),P=C.c.createFieldStr({sharingPolicyOnAccount:{},project:{title:{}},account:{id:{},title:{},type:{},role:{}},ownerEmail:{},currentUserPermission:{user:{id:{}},permissions:{}},id:{},ownerConnection:{accountConnection:{id:{},account:{id:{}},organizationConnection:{license:{},deactivated:{}}},user:{name:{},id:{},email:{},picture:{}}}});!function(e){e[e.NORMAL=0]="NORMAL",e[e.CONFIRM=1]="CONFIRM",e[e.ALERT=2]="ALERT"}(o||(o={}));var N={accountConnection:{id:{},account:{id:{}},organizationConnection:{license:{}}},user:{name:{},id:{},email:{},picture:{}},invites:{},role:{},id:{}};function L(){return{toViewer:{caption:"You will be a viewer on this board",text:"There is no way to undo this action. <br>You will no longer be able to edit these settings and this board.",mode:o.CONFIRM},toCommenter:{caption:"You will be a commenter on this board",text:"There is no way to undo this action. <br>You will no longer be able to edit these settings and this board.",mode:o.CONFIRM},changeOwner:{caption:"You are surrendering ownership of this board",text:"There is no way to undo this action. <br>You will no longer be the owner of this board.",mode:o.CONFIRM},leaveBoard:{caption:"You are about to leave this board",text:"There is no way to undo this action. <br>You will no longer be able to access this board.",mode:o.CONFIRM},makeNotTeamMemberEditorForAdmin:{caption:"Only members of your team can edit boards",text:"<b>%userName%</b> is not a member of <b>%teamName%</b> team. <br>Please add them to the team, and they will be able to edit this board.",mode:o.ALERT},makeNotTeamMemberEditorForNotAdmin:{caption:"Only members of your team can edit boards",text:'<b class="break-word">%userName%</b> is not a member of <b class="break-word">%teamName%</b> team. <br>Please ask the team administrator at <b class="break-word">%adminEmail%</b> to add this user to the team, and they will be able to edit this board.',mode:o.ALERT},toExternalAsOwnerForAdmin:{caption:"Only members of your team can own boards",text:'<b class="break-word">%userName%</b> is not a member of <b class="break-word">%teamName%</b> team. <br>Please add them to the team, and they will be able to own this board.',mode:o.ALERT},toExternalAsOwnerForNotAdmin:{caption:"Only members of your team can own boards",text:'<b class="break-word">%userName%</b> is not a member of <b class="break-word">%teamName%</b> team. <br>Please ask the team administrator at <b class="break-word">%adminEmail%</b> to add this user to the team, and they will be able to own this board.',mode:o.ALERT}}}var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Modes=o,t.mode=o.NORMAL,t.inProgress=!1,t.showWithFilters=!1,t}return Object(r.d)(t,e),t.prototype.init=function(){m.Ug(),this.caption="Access settings to board",this.messagesConfig=L(),this.getBoardData()},t.prototype.getBoardData=function(){var e=this;this.inProgress=!0,c.a.boards.selectById(this.params.boardId).get({fields:P}).then(function(t){var n=t.ownerConnection;e.boardInfo=t;var o=c.a.boards.selectById(e.params.boardId),r=new _({step:20,firstLoadingCount:100,loader:o.userConnections(N).get,staticSearchFields:{addOwnerOption:e.canChangeOwner(),onChangeRole:function(t,n){return r.getRemoveKey()===n.value?e.removePermission(t):e.changePermissionRole(t,n.value)},readonly:!e.canChangeRole()}});n&&r.setStaticAdditionBefore([{userId:n.user.id,accountConnection:n.accountConnection,deactivated:n&&n.accountConnection&&n.accountConnection.organizationConnection&&n.accountConnection.organizationConnection.deactivated,role:a.a.OWNER,email:t.ownerEmail,options:[],name:n.user.name,picture:n.user.picture,canChangePermission:!1,needRequestLicenseToEdit:!1}]);var i=new A.a([r],20,!0);i.firstLoaded.addOnce(function(){e.users=i,e.showWithFilters=e.users.maxArrayCount>20,e.$scope.$apply()}),e.inProgress=!1})},t.prototype.canChangeOwner=function(){return!!this.boardInfo&&this.boardInfo.currentUserPermission.permissions.includes(s.a.SET_OWNER)&&!b.sb(this.boardInfo.account)},t.prototype.canChangeRole=function(){return!!this.boardInfo&&this.boardInfo.currentUserPermission.permissions.includes(s.a.EDIT_USERS)},t.prototype.changeInviteRole=function(e,t){var n=this;return f.k(this.boardInfo.account,e.email).then(function(o){if(n.$scope.$apply(),!o&&t===a.a.EDITOR)return n.showEditorInNotTeamAlert(e),!1;var r=c.a.invites.selectById(e.userId).set({role:t});return m.Cb(),n.processRequest(r,"Access rights changed"),r.then(function(){return!0})})},t.prototype.changePermissionRole=function(e,t){var n=this;return this.runAfterChangeConfirmation(e,t).then(function(){var o;if(m.Cb(),t===a.a.OWNER){var r=function(){};o=c.a.boards.selectById(n.boardInfo.id).changeOwner(e.userId).catch(function(t){throw t.responseJSON&&"externalUserCannotBeBoardsOwner"===t.responseJSON.error.reason&&(n.showAlertToExternalAsOwner(e),r()),t}),r=n.processRequest(o,"Owner changed",function(){n.getBoardData(),Object(v.b)("AccessSettingsMC.changePermissionRole.OWNER"),R().currentBoard.updateUserPermissions(),E.a.instance&&E.a.instance.getSignals().ui.dashboard.boardOwnerChanged({boardId:n.boardInfo.id})})}else o=c.a.permissions.selectById(e.permissionId).set({role:t}),n.processRequest(o,"Access rights changed",function(){n.isCurrentUserPermission(e.userId)&&(Object(v.b)("AccessSettingsMC.changePermissionRole.NOT_OWNER"),R().currentBoard.updateUserPermissions(),t!==a.a.VIEWER&&t!==a.a.COMMENTATOR||n.cancel())});return o}).then(function(){return!0}).catch(function(){return!1})},t.prototype.removeInvite=function(e){var t=this;if(this.inProgress)return Promise.resolve(!1);this.inProgress=!0;var n=c.a.invites.selectById(e.userId).delete();return this.processRequest(n,"Invitation cancelled"),n.then(function(){return Object(v.b)("AccessSettingsMC.removeInvite"),R().currentBoard.updateUserPermissions(),T().updateUserProfileInfo(),t.inProgress=!1,!0}).catch(function(){return t.inProgress=!1,!1})},t.prototype.removePermission=function(e){var t=this;return this.inProgress?Promise.resolve(!1):this.runAfterRemoveConfirmation(e).then(function(){t.inProgress=!0,g.e.accessRevokedModalEnabled=!1;var n=c.a.permissions.selectById(e.permissionId).delete();return t.processRequest(n,'"'+e.name+'" has been removed from the board'),n.then(function(){return t.isCurrentUserPermission(e.userId)?x().isDashboardOpened()?(t.cancel(),E.a.instance&&E.a.instance.getSignals().ui.dashboard.boardDeleted({boardId:t.boardInfo.id})):x().openDashboard():(Object(v.b)("AccessSettingsMC.removePermission"),R().currentBoard.updateUserPermissions()),t.inProgress=!1,!0}).catch(function(){return t.inProgress=!1,!1})})},t.prototype.runAfterChangeConfirmation=function(e,t){var n=this;return f.l(this.boardInfo.account,e.userId).then(function(o){return o||t!==a.a.EDITOR?new Promise(function(o){n.confirmationCallback=o,t===a.a.OWNER?(m.Tj(),n.showConfirmation("changeOwner")):t===a.a.VIEWER&&n.isCurrentUserPermission(e.userId)?n.showConfirmation("toViewer"):t===a.a.COMMENTATOR&&n.isCurrentUserPermission(e.userId)?n.showConfirmation("toCommenter"):o()}):(n.showEditorInNotTeamAlert(e),Promise.reject(new Error("isNotTeamMemberInTeamBoard")))})},t.prototype.showEditorInNotTeamAlert=function(e){var t=this;this.prepareTexts(e).then(function(){t.isMeTeamAdmin()?(m.ji(),t.showAlert("makeNotTeamMemberEditorForAdmin")):(m.ki(),t.showAlert("makeNotTeamMemberEditorForNotAdmin"))})},t.prototype.showAlertToExternalAsOwner=function(e){var t=this;this.prepareTexts(e).then(function(){t.isMeTeamAdmin()?(m.ji(),t.showAlert("toExternalAsOwnerForAdmin")):(m.ki(),t.showAlert("toExternalAsOwnerForNotAdmin"))})},t.prototype.isMeTeamAdmin=function(){return this.boardInfo.account.role===h.a.ADMIN},t.prototype.prepareTexts=function(e){var t=this;return new Promise(function(n,o){c.a.accounts.selectById(t.boardInfo.account.id).getTeamAdmins(1).then(function(o){var r=o.data[0].email,i=e&&e.name||e.email,a=t.boardInfo.account.title;t.prepareText("makeNotTeamMemberEditorForAdmin",a,i,r),t.prepareText("makeNotTeamMemberEditorForNotAdmin",a,i,r),t.prepareText("toExternalAsOwnerForAdmin",a,i,r),t.prepareText("toExternalAsOwnerForNotAdmin",a,i,r),t.$scope.$apply(),n()}).catch(o)})},t.prototype.prepareText=function(e,t,n,o){this.messagesConfig[e].text=L()[e].text.replace(/%teamName%/,t).replace("%userName%",n).replace("%adminEmail%",o)},t.prototype.runAfterRemoveConfirmation=function(e){var t=this;return new Promise(function(n){t.isCurrentUserPermission(e.userId)?(t.confirmationCallback=n,t.showConfirmation("leaveBoard")):n()})},t.prototype.showAlert=function(e){this.showConfirmation(e)},t.prototype.showConfirmation=function(e){var t=this.messagesConfig[e];this.mode=t.mode,this.caption=t.caption,this.confirmationText=t.text,this.$scope.safeApply()},t.prototype.confirmRightsChanging=function(){this.confirmationCallback&&this.confirmationCallback(),this.mode=o.NORMAL,this.caption="Access settings to board"},t.prototype.cancelRightsChanging=function(){this.confirmationCallback=void 0,this.mode=o.NORMAL,this.caption="Access settings to board",this.getBoardData()},t.prototype.processRequest=function(e,t,n){return w().processPromise({promise:e,waitingMessage:"Saving\u2026",successMessage:t,successCallback:n})},t.prototype.isCurrentUserPermission=function(e){return this.boardInfo.currentUserPermission.user&&e==this.boardInfo.currentUserPermission.user.id},t.prototype.boardSharedOnAccount=function(){return!!this.boardInfo&&this.boardInfo.sharingPolicyOnAccount!==I.a.PRIVATE},t.prototype.boardSharedOnAccountRole=function(){var e=this.boardInfo&&this.boardInfo.sharingPolicyOnAccount||"";return e===I.a.COMMENT?"leave comments on":e.toLocaleLowerCase()},t.prototype.accountTitle=function(){return this.boardInfo&&this.boardInfo.account.title||"your team"},t.prototype.boardSharedOnProject=function(){return!!this.boardInfo&&!!this.boardInfo.project},t.prototype.projectTitle=function(){return this.boardInfo&&this.boardInfo.project&&this.boardInfo.project.title||""},t.prototype.canViewProject=function(){return!1},t.prototype.projectTitleClicked=function(){this.canViewProject()&&Object(y.a)().then(function(e){e.showProjectInfoModal()})},Object(r.c)([Object(O.c)("user.profile.id")],t.prototype,"myUserId",void 0),t}(i.b),M=n(46),D=n(44),B=n(2363),j=n(62),k=n(67);t.a=function(e){return Object(j.a)(),Object(k.a)(),Object(B.a)(),n(4423),M.a(D.a.BOARD_ACCESS,S,n(4425),Object(r.a)({enableSubmitByEnter:!1},e))}},265:function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"i",function(){return a}),n.d(t,"a",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return d}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return p}),n.d(t,"h",function(){return h});var o=n(33),r=n(213);function i(e){return!e.lockedByActiveBoardsPerAccountLimitExceeded&&!a(e)}function a(e){return Object(o.X)(e.account)&&c(e)}function s(e){return Object(o.fb)(e.account)&&!e.account.currentUserPermission&&!d(e)&&e.participant}function c(e){return!!e.sharingPolicyOnAccount&&e.sharingPolicyOnAccount===r.a.PRIVATE}function d(e){return!!e.sharingPolicy&&e.sharingPolicy!==r.a.PRIVATE}function l(e,t){return!!e.currentUserPermission&&e.currentUserPermission.permissions.includes(t)}function u(e){return!!e&&e.account||void 0}function p(e){return(e.permissions?e.permissions.size:0)+(e.invites?e.invites.size:0)}function h(e){return!!e.project&&e.project.sharingPolicyOnAccount!==r.a.PRIVATE}},292:function(e,t,n){"use strict";var o=n(21),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(o.d)(t,e),t}(n(860).a);t.a=r},347:function(e,t,n){"use strict";var o=n(141);o.b("Projects",function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(3),n.e(12),n.e(13),n.e(19),n.e(26),n.e(47),n.e(72)]).then(n.bind(null,1565)).then(function(e){return e.default})}),t.a=o.a("Projects")},4416:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var o=n(21),r=n(4417),i=n(1476),a=function(t){function n(n,o,r){void 0===r&&(r=!1);var i=t.call(this,n,o)||this;return i.postLoadCacheEnable=r,i.postLoadCacheUpdated=new e.Signal,i.lengthMap=[],i.postLoadCache=[],i.subscribesForPostLoad(),i}return Object(o.d)(n,t),n.prototype.subscribes=function(){},n.prototype.subscribesForPostLoad=function(){var e=this;if(this.postLoadCacheEnable){var n=[];this.storages.forEach(function(o,r){n[r]=!1,o.firstLoaded.addOnce(function(){n[r]=!0,n.every(function(e){return e})&&(t.prototype.subscribes.call(e),e.firstLoaded.dispatch())}),o.itemWasDeleted.add(function(t){e.delete(t)})}),this.firstLoaded.add(function(){e.postLoadCache=e.generatePostLoadData(),e.lengthMap=e.storages.map(function(e){return e.maxArrayCount}),e.postLoadCacheUpdated.dispatch()})}else t.prototype.subscribes.call(this)},n.prototype.mapBy=function(e){return e&&e.email},n.prototype.compareObjects=function(e,t){return this.mapBy(e)===this.mapBy(t)},n.prototype.setFiltersByRole=function(e){var t=this.storages.map(function(t){return t.setFiltersByRole(e)});return Promise.all(t).then(function(){})},n.prototype.getRemoveKey=function(){return i.b},n.prototype.generatePostLoadData=function(){var e=[];return this.storages.forEach(function(t){t.maxArrayCount!==1/0&&(e=e.concat(t.generatePostLoadData()))}),e},n.prototype.loadPostDataSegment=function(e,t,n){var o=this;void 0===n&&(n=0);var r=[];return this.lengthMap.forEach(function(i,a){if(i!==1/0&&e>0&&t>0){var s=Math.max(Math.min(e,t)-n,0),c=Math.min(Math.max(e,t)+n,i);for(e-=i,t-=i;s<c&&o.postLoadCache[s]&&o.postLoadCache[s].loaded;)s++;for(;s<c&&o.postLoadCache[c-1]&&o.postLoadCache[c-1].loaded;)c--;var d=c-s;d>0&&r.push(new Promise(function(e){var t=o.postLoadCache.slice(s,c);o.storages[a].loadObjects(o.storages[a].searchParam,d,s).then(function(n){t.forEach(function(e,t){e.loadedItem=n[t]}),e()})}))}}),Promise.all(r).then(function(){})},n.prototype.getPostLoadItems=function(){return this.postLoadCache},n.prototype.delete=function(e){var t=this;this.postLoadCacheEnable&&(this.postLoadCache=this.postLoadCache.filter(function(n){return!n.loadedItem||!t.compareObjects(n.loadedItem,e)}),this.postLoadCacheUpdated.dispatch())},n.prototype.search=function(e,n,o){return void 0===n&&(n=!1),this.postLoadCacheEnable?Promise.all(this.storages.map(function(t){return t.search(e,n,o)})).then(function(){}):t.prototype.search.call(this,e,n,o)},n.prototype.loadObjects=function(e,t,n){return Promise.reject(new Error("MultiStorageWithRole can`t load objects"))},n}(r.a)}).call(this,n(38))},4417:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var o=function(){function t(t,n){this.firstLoaded=new e.Signal,this.loaded=new e.Signal,this.nextLoaded=new e.Signal,this._step=20,this.storages=[],this.searchPromise=Promise.resolve(),this.currentStage=0,this.storages=t,this._step=n,this.subscribes()}return Object.defineProperty(t.prototype,"nextLoading",{get:function(){return this.storages.some(function(e){return e.loading})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loading",{get:function(){return this.activeStorages.some(function(e){return e.loading})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadingLeft",{get:function(){return this.storages.slice(this.currentStage).reduce(function(e,t){return e+t.loadingLeft},0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this._step},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxArrayCount",{get:function(){return 0===this.storages.length?1/0:this.storages.reduce(function(e,t){return e+t.maxArrayCount},0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentArrayCount",{get:function(){return this.activeStorages.reduce(function(e,t){return e+t.currentArrayCount},0)},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(e){var t=this;e.firstLoaded.add(function(n){t.nextIfNeed(e).then(function(){t.firstLoaded.dispatch(n)})}),e.nextLoaded.add(function(e){t.nextLoaded.dispatch(e)}),e.loaded.add(function(e){t.loaded.dispatch(e)})},t.prototype.subscribes=function(){var e=this;this.storages.forEach(function(t){e.subscribe(t)})},t.prototype.search=function(e,t,n){var o=this;return void 0===t&&(t=!1),this.currentStage=0,this.searchPromise=this.searchPromise.then(function(){var r=o.storages[0];return(o.storages.slice(1)||[]).forEach(function(t){t.search(e,!0,n)}),r.search(e,t,n)}),this.searchPromise},t.prototype.nextIfNeed=function(e){return 0===e.loadingLeft?this.next():Promise.resolve()},Object.defineProperty(t.prototype,"activeStorages",{get:function(){return this.storages.slice(0,this.currentStage+1)},enumerable:!0,configurable:!0}),t.prototype.next=function(){var e=this;if(this.nextLoading){var t=this.storages[this.currentStage];this.loaded.addOnce(function(){e.nextIfNeed(t)})}else this.searchPromise=this.searchPromise.then(function(){var t=e._step,n=[];return e.storages.forEach(function(o,r){var i=o.loadingLeft;i>0&&t>0&&(n.push(o),t-=i,e.currentStage=r)}),0===n.length&&(e.currentStage=e.storages.length-1),Promise.all(n.map(function(e){return e.next()})).then(function(){return Promise.resolve()})});return this.searchPromise},t.prototype.getItems=function(){return this.activeStorages.reduce(function(e,t){return e.concat(t.getItems())},[])},t}()}).call(this,n(38))},4423:function(e,t,n){var o=n(4424);"string"===typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(24)(o,r);o.locals&&(e.exports=o.locals)},4424:function(e,t,n){(e.exports=n(23)(!1)).push([e.i,".board-access-modal .users-list--height {\n  max-height: 500px;\n}\n.board-access-modal .with-filters .users-list--height {\n  height: 500px;\n}\n.board-access-modal .with-filters .scrollable--scroll-not-at-end {\n  height: 1px;\n}\n.board-access-modal .with-filters.board-access-modal--normal {\n  margin-top: 0;\n}\n.board-access-modal .board-access-modal--normal {\n  margin-top: 20px;\n}\n.board-access-modal .rtb-modal-content {\n  padding: 36px 0 60px 0;\n}\n.board-access-modal .users-list--no-items {\n  text-align: center;\n}\n.board-access-modal .users-list--no-items a {\n  cursor: pointer;\n}\n.board-access-modal .rtb-modal-container__content > div,\n.board-access-modal .rtb-modal-container__content .rtb-modal-content__header.rtb-modal-header {\n  padding: 0 54px;\n}\n.board-access-modal .rtb-modal-container__content .board-access-modal--normal.rtb-modal-content__body {\n  padding: 0;\n}\n.board-access-modal .users-list--access .users-list__search {\n  right: 66px;\n}\n.board-access-modal .users-list--access .users-list__search--expanded .users-list__search {\n  width: calc(100% - 116px);\n}\n.board-access-modal .users-list--access .user-item--padding {\n  padding-right: 0;\n  padding-left: 56px;\n}\n.board-access-modal .users-list--access .user-item--info {\n  max-width: 232px;\n}\n.board-access-modal .board-access__share-info {\n  -ms-flex: 1 1 100%;\n      flex: 1 1 100%;\n  -ms-flex-item-align: center;\n      -ms-grid-row-align: center;\n      align-self: center;\n  padding-left: 20px;\n  font-size: 12px;\n}\n",""])},4425:function(e,t){e.exports='<rtb-modal class="board-access-modal rtb-modal--center rtb-modal--medium">\n    <rtb-modal-close-button hm-tap="modal.cancel()"></rtb-modal-close-button>\n    <div class="rtb-modal-container__content rtb-modal-content">\n        <div class="rtb-modal-content__header rtb-modal-header">\n            <div class="rtb-modal-header__title rtb-modal-title">\n                <div class="rtb-modal-title__text">{{modal.caption}}</div>\n            </div>\n        </div>\n        <div class="board-access-modal--normal rtb-modal-content__body rtb-modal-body"\n             ng-class="{\'with-filters\':modal.showWithFilters}"\n             ng-show="modal.mode === modal.Modes.NORMAL">\n            <access-users-list search-storage="modal.users"\n                               enable-role-filters="modal.showWithFilters">\n                <div ng-if="modal.users.searchParam.search">\n                    <span>No one found matching {{modal.users.searchParam.search}}.</span>\n                </div>\n                <div ng-if="!modal.users.searchParam.search">\n                    <span>There are no users in this category.</span>\n                </div>\n            </access-users-list>\n        </div>\n        <div class="board-access-modal--msg rtb-modal-content__body rtb-modal-body "\n             ng-show="modal.mode !== modal.Modes.NORMAL"\n             ng-bind-html="modal.confirmationText">\n        </div>\n        <div class="rtb-modal-content__actions rtb-modal-actions">\n            <button class="rtb-btn rtb-btn--primary rtb-btn--medium"\n                    ng-show="modal.mode === modal.Modes.NORMAL"\n                    hm-tap="modal.submit()">\n                Done\n            </button>\n            <div class="board-access__share-info"\n                 ng-if="modal.mode === modal.Modes.NORMAL">\n                <div ng-show="modal.boardSharedOnAccount()">\n                    <span>Any member of</span>\n                    <b>{{modal.accountTitle()}}</b>\n                    <span>can</span>\n                    <span>{{modal.boardSharedOnAccountRole()}}</span>\n                    <span>this board.</span>\n                </div>\n                <div ng-show="modal.boardSharedOnProject()">\n                        <span ng-class="{\'rtb-link\': modal.canViewProject()}"\n                              hm-tap="modal.projectTitleClicked()">{{modal.projectTitle()}}</span>\n                    <span>project members also have access.</span>\n                </div>\n            </div>\n            <button class="rtb-btn rtb-btn--primary rtb-btn--medium"\n                    ng-show="modal.mode === modal.Modes.CONFIRM"\n                    hm-tap="modal.confirmRightsChanging()">\n                \u041e\u043a\n            </button>\n            <button class="rtb-btn rtb-btn--secondary rtb-btn--medium"\n                    ng-show="modal.mode === modal.Modes.CONFIRM"\n                    hm-tap="modal.cancelRightsChanging()">\n                Cancel\n            </button>\n            <button class="rtb-btn rtb-btn--primary rtb-btn--medium"\n                    ng-show="modal.mode === modal.Modes.ALERT"\n                    hm-tap="modal.cancelRightsChanging()">\n                Ok\n            </button>\n        </div>\n    </div>\n</rtb-modal>'},670:function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},937:function(e,t,n){"use strict";var o=n(21),r=function(e){function t(){return e.call(this,"UPGRADE_ACCOUNT_CANCELED","UpgradeAccountCanceledInvitationError")||this}return Object(o.d)(t,e),t}(n(292).a);t.a=r}}]);
//# sourceMappingURL=cmn~Bil~ShaAndInv.5147f8dae3fc65aa23c9.js.map